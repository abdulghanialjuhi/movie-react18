(this["webpackJsonpnew_movie-react"]=this["webpackJsonpnew_movie-react"]||[]).push([[0],{103:function(e,t,c){},126:function(e,t,c){},127:function(e,t,c){},128:function(e,t,c){},136:function(e,t,c){"use strict";c.r(t);var n=c(1),a=c.n(n),s=c(28),r=c.n(s),i=(c(98),c(8)),o=(c(99),c(3)),l=c(51),j=c(144),u=c(145),d=c(146),b=c(138),h=c(0);function O(e){var t=e.show,c=e.setShow,n=e.handleLogin,a=e.message;return Object(h.jsxs)(d.a,{show:t,onHide:function(){return c(!1)},children:[Object(h.jsx)(d.a.Header,{closeButton:!0,children:Object(h.jsx)(d.a.Title,{children:"Alert"})}),Object(h.jsx)(d.a.Body,{children:a}),Object(h.jsxs)(d.a.Footer,{children:[Object(h.jsx)(b.a,{onClick:function(){return c(!1)},variant:"secondary",children:"Close"}),Object(h.jsxs)(b.a,{onClick:n,variant:"primary",children:["Log in now"," "]})]})]})}var m=Object(n.createContext)({}),p=(c(103),function(){var e=Object(i.g)(),t=Object(i.f)().pathname,c=Object(n.useContext)(m).isAuth,a=Object(n.useState)(""),s=Object(o.a)(a,2),r=s[0],d=s[1],b=Object(n.useState)(null),p=Object(o.a)(b,2),x=p[0],f=p[1],g=Object(n.useState)(!1),v=Object(o.a)(g,2),w=v[0],y=v[1],N=function(){c?window.location="/auth/home":e("/auth/log-in"),y(!1)};return Object(h.jsx)(h.Fragment,{children:Object(h.jsxs)(j.a,{bg:"light",expand:"lg",children:[Object(h.jsx)(j.a.Brand,{className:"home",onClick:function(){window.location="/popular/1"},children:"React-Movie"}),Object(h.jsx)(j.a.Toggle,{"aria-controls":"basic-navbar-nav",onClick:function(){return f(null)}}),Object(h.jsxs)(j.a.Collapse,{id:"basic-navbar-nav",children:[Object(h.jsxs)(u.a,{className:"mr-auto",children:[Object(h.jsxs)(u.a,{style:{margin:5,color:"/auth/log-in"===t||"/auth/home"===t?"black":"gray",cursor:"pointer"},onClick:N,children:[" ",c?"Profile":"Log in"," "]}),Object(h.jsx)(u.a,{style:{margin:5,color:"/auth/watchlist"===t?"black":"gray",cursor:"pointer"},onClick:function(){c?window.location="/auth/watchlist":y(!0)},children:"Watchlist"})]}),Object(h.jsx)(O,{show:w,setShow:y,handleLogin:N,message:"Sorry, You are not logged in to go to Watchlist page !"}),Object(h.jsxs)("div",{className:null===x?"Search-containor":x?"Search-containor expend":"Search-containor close",children:[Object(h.jsx)("div",{style:{height:"100%",display:"flex",alignItems:"center"},onClick:function(){if(null===x)return f(!0);f(!x),d("")},children:Object(h.jsx)(l.c,{className:"fasearch"})}),x&&Object(h.jsx)("form",{className:"form",onSubmit:function(){r.length>=1&&e("/search/".concat(r))},children:Object(h.jsx)("input",{className:"search",type:"search",placeholder:"Search by movie title",value:r,onChange:function(e){d(e.target.value)}})})]})]})]})})}),x=c(2),f=c(9),g=c.n(f),v=c(44),w=c(21);function y(e){var t=e.alertErr;return Object(h.jsx)("div",{children:Object(h.jsx)(d.a,{show:!0,children:Object(h.jsx)(d.a.Body,{children:t})})})}var N=c(139),S=c(86),k=c.n(S).a.create({withCredentials:!0});function C(e){var t=e.items,c=Object(n.useContext)(m),a=c.isAuth,s=c.watchlist,r=c.actions,l=Object(i.g)(),j=Object(n.useState)(!1),u=Object(o.a)(j,2),d=u[0],b=u[1],p=Object(n.useState)(!1),x=Object(o.a)(p,2),f=x[0],S=x[1],C=Object(n.useState)(!1),_=Object(o.a)(C,2),F=_[0],E=_[1],L=Object(n.useState)(),T=Object(o.a)(L,2),B=T[0],R=T[1],A=!!(s&&s.find((function(e){return e===t.id.toString()}))),I=function(){var e=Object(w.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:S(!0),k("/add_movie",{params:{movie_id:t.id}}).then((function(e){"Success"===e.data&&r({type:"set_watchlist",payload:[].concat(Object(v.a)(s),[t.id.toString()])}),S(!1)})).catch((function(e){S(!1),E(!0),401===e.response.status?R("Sorry, Your session has ended"):R("Error, Try again"),setTimeout((function(){return window.location="/popular/1"}),2e3)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(h.jsxs)("div",{className:"watch-div",children:[Object(h.jsx)(O,{show:d,setShow:b,handleLogin:function(){l("/auth"),b(!1)},message:"Sorry, you are not logged in to add this movie to your Watchlist !"}),F&&Object(h.jsx)(y,{alertErr:B}),Object(h.jsx)("button",{className:a&&A?"watch-btn watchlisted":"watch-btn",onClick:function(){a?A?A&&(S(!0),k("/remove_watchlist",{params:{movie_id:t.id}}).then((function(e){if("Success"===e.data){var c=s.filter((function(e){return e!==t.id.toString()}));r({type:"set_watchlist",payload:c})}S(!1)})).catch((function(e){S(!1),E(!0),401===e.response.status?R("Sorry, Your session has ended"):R("Error, Try again"),setTimeout((function(){return window.location="/popular/1"}),2e3)}))):I():b(!0)},disabled:f,children:f?Object(h.jsx)(N.a,{animation:"border",style:{width:15,height:15}}):a&&A?"Remove from my watchlist":"Add to my watchlist"})]})}function _(e){var t=e.overview,c=e.poster_path,a=e.title,s=e.vote_average,r=e.spoken_languages,i=e.release_date,o=e.items,l=e.genres,j=Object(n.useContext)(m).watchlist,u=l.slice(0,3);return Object(h.jsxs)("div",{className:"overview_information",children:[Object(h.jsx)("div",{className:"poster-container",children:Object(h.jsx)("img",{className:"sidebar",src:"https://image.tmdb.org/t/p/w1280"+c,alt:a})}),Object(h.jsxs)("div",{className:"overview-containor",children:[Object(h.jsx)("h3",{className:"title",children:a}),Object(h.jsxs)("ul",{className:"information",children:[Object(h.jsxs)("li",{className:"li imdb fab",children:[Object(h.jsx)("h5",{style:{color:"#f3ce13",marginRight:6},children:"IMDB Rating:"}),s]}),Object(h.jsxs)("li",{className:"li imdb",children:[Object(h.jsx)("h5",{style:{margin:0,marginRight:6},children:" Language: "}),r[0]?r[0].english_name:"undefind"]}),Object(h.jsxs)("li",{className:"li imdb",children:[Object(h.jsx)("h5",{style:{margin:0,marginRight:6},children:" Year: "}),i.slice(0,-6)]})]}),Object(h.jsxs)("div",{className:"genres",children:[Object(h.jsx)("h5",{style:{color:"#e5e5e5"},children:"Genres:"}),Object(h.jsx)("ul",{className:"ul-genres",children:u.map((function(e){return Object(h.jsx)("li",{className:"li-genres",children:e.name},e.id)}))})]}),Object(h.jsx)(C,{items:o,watchlist:j}),Object(h.jsxs)("p",{children:[" ",t," "]})]})]})}function F(){return Object(h.jsx)("div",{style:{justifyContent:"center",alignContent:"center",height:200,paddingTop:100},children:Object(h.jsx)("div",{className:"loading",children:Object(h.jsx)(N.a,{animation:"border"})})})}function E(e){var t=e.id,c=e.isLoaded,a=Object(n.useState)([]),s=Object(o.a)(a,2),r=s[0],i=s[1],l=Object(n.useState)(!1),j=Object(o.a)(l,2),u=j[0],d=j[1],b=Object(n.useContext)(m).getInfo;Object(n.useEffect)((function(){var e=!0;return O(e),function(){return e=!1}}),[]);var O=function(){var e=Object(w.a)(g.a.mark((function e(n){var a,s,r;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!c){e.next=14;break}return e.prev=1,e.next=4,fetch(b(t,"videos"));case 4:return a=e.sent,e.next=7,a.json();case 7:s=e.sent,n&&(r=s.results,i(r),d(!0)),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}();return r.length>0?Object(h.jsx)(h.Fragment,{children:u?Object(h.jsx)("div",{className:"iframeContainer",children:Object(h.jsxs)("div",{className:"trailer_div",children:[Object(h.jsx)("h3",{children:"Trailer"}),Object(h.jsx)("iframe",{className:"iframe",src:"https://www.youtube.com/embed/".concat(r[0].key),width:"100%",title:"myFrame",allowFullScreen:!0})]})}):Object(h.jsx)(F,{})}):Object(h.jsx)("div",{className:"iframeContainer",children:Object(h.jsxs)("div",{className:"trailer_div",children:[Object(h.jsx)("h3",{children:"Trailer"}),Object(h.jsx)("h1",{className:"not-avalible",children:" Trailer Not Available ! "})]})})}var L=c(10);function T(e){var t=Object(n.useState)([]),c=Object(o.a)(t,2),a=c[0],s=c[1],r=Object(n.useState)(!1),i=Object(o.a)(r,2),l=i[0],j=i[1],u=Object(n.useContext)(m).movieInfo;return Object(n.useEffect)((function(){var t=!0;return fetch(u(e.id)).then((function(e){return e.json()})).then((function(e){if(t){var c=e.genres.slice(0,3);s(c),j(!0)}})),function(){return t=!1}}),[]),Object(h.jsx)(h.Fragment,{children:l?Object(h.jsx)("ul",{children:Object(h.jsx)("div",{children:a.map((function(t){return Object(h.jsx)("li",{className:e.class,children:t.name},t.id)}))})}):Object(h.jsx)(F,{})})}function B(e){return e>=8?"green":e>=5?"orange":"red"}var R=function(e){var t=e.poster_path,c=e.title,n=e.vote_average,a=e.id,s=e.release_date;return Object(h.jsxs)("div",{className:"movie",children:[Object(h.jsx)(L.b,{to:"/movie/".concat(a),children:Object(h.jsx)("img",{src:t?"https://image.tmdb.org/t/p/w1280"+t:"https://www.publicdomainpictures.net/pictures/280000/velka/not-found-image-15383864787lu.jpg",alt:c})}),Object(h.jsxs)("div",{className:"movie-info",children:[Object(h.jsx)("div",{className:"titleContainor",children:Object(h.jsx)("h3",{children:c})}),Object(h.jsx)("div",{className:"voteContainor",children:Object(h.jsx)("span",{className:B(n),children:n})})]}),Object(h.jsxs)("div",{className:"overview",children:[Object(h.jsx)(T,{id:a,cclass:"overview-genres"}),Object(h.jsx)("hr",{}),Object(h.jsxs)("h5",{children:[" ",s," "]})]})]})};function A(e){var t=e.isLoaded,c=Object(n.useState)([]),a=Object(o.a)(c,2),s=a[0],r=a[1],l=Object(n.useState)(!1),j=Object(o.a)(l,2),u=j[0],d=j[1],b=Object(i.h)().id,O=Object(n.useContext)(m).getInfo;return Object(n.useEffect)((function(){var e=!0;return t&&fetch(O(b,"similar")).then((function(e){return e.json()})).then((function(t){if(e){var c=t.results;r(c),d(!0)}})).catch((function(e){console.log(e)})),function(){return e=!1}}),[]),s?Object(h.jsx)(h.Fragment,{children:u?Object(h.jsxs)("div",{className:"similar-containor",children:[Object(h.jsx)("h3",{className:"similar",children:" Similar Movies "}),Object(h.jsx)("div",{className:"section",children:s.map((function(e){return Object(n.createElement)(R,Object(x.a)(Object(x.a)({},e),{},{key:e.id}))}))})]}):Object(h.jsx)(F,{})}):Object(h.jsxs)("div",{className:"similar-containor",children:[Object(h.jsx)("h3",{className:"similar",children:" Similar Movies "}),Object(h.jsx)("div",{style:{width:"100%",height:150,justifyContent:"center",display:"flex",alignItems:"center"},children:Object(h.jsx)("h3",{style:{color:"#fff"},children:" Similar not found "})})]})}function I(e){var t=e.id,c=e.isLoaded,a=Object(n.useState)([]),s=Object(o.a)(a,2),r=s[0],i=s[1],l=Object(n.useState)("none"),j=Object(o.a)(l,2),u=j[0],d=j[1],b=Object(n.useContext)(m).getInfo;Object(n.useEffect)((function(){var e=!0;return c&&fetch(b(t,"credits")).then((function(e){return e.json()})).then(function(){var t=Object(w.a)(g.a.mark((function t(c){var n;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=c.cast,!e){t.next=4;break}return t.next=4,i(n);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),function(){return e=!1}}),[t,c]);return Object(h.jsxs)("div",{className:"actors",children:[Object(h.jsx)("div",{className:"actors-label",children:Object(h.jsx)("h1",{style:{fontSize:30},children:" Cast "})}),c&&r?Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("div",{className:"actors-container",children:r.map((function(e){return Object(h.jsxs)("div",{className:"actor-container",style:{display:e.order<6?"block":u},children:[Object(h.jsx)("div",{className:"actor-img",children:Object(h.jsx)("img",{style:{width:150,height:225},src:e.profile_path?"https://image.tmdb.org/t/p/w1280"+e.profile_path:"https://st4.depositphotos.com/1156795/20814/v/600/depositphotos_208142514-stock-illustration-profile-placeholder-image-gray-silhouette.jpg",alt:e.name})}),Object(h.jsxs)("div",{className:"label-container",children:[Object(h.jsxs)("h5",{children:[" ",e.name," "]}),Object(h.jsxs)("span",{children:[" ",e.character," "]})]})]},e.cast_id)}))}),Object(h.jsx)("div",{onClick:function(){d("none"===u?"block":"none")},className:"more-actors",children:Object(h.jsxs)("h5",{children:[" ","none"===u?"See all":"See less"," "]})})]}):Object(h.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:Object(h.jsx)("h3",{children:" Not found "})})]})}c(126);function q(){var e=Object(n.useState)([]),t=Object(o.a)(e,2),c=t[0],a=t[1],s=Object(n.useState)(!1),r=Object(o.a)(s,2),l=r[0],j=r[1],u=Object(n.useContext)(m).movieInfo,d=Object(i.h)().id;return Object(n.useEffect)((function(){var e=!0;return fetch(u(d)).then((function(e){return e.json()})).then((function(t){e&&(a(t),j(!0))})),function(){return e=!1}}),[]),Object(h.jsx)(h.Fragment,{children:l?Object(h.jsx)("div",{className:"backdrop-image",style:{height:"95vh",backgroundImage:"linear-gradient(to right, rgba(0,0,0,0.5), rgba(0,0,0,0.5)),\n            url(".concat(c.backdrop_path?"https://image.tmdb.org/t/p/w1280"+c.backdrop_path:"https://www.publicdomainpictures.net/pictures/280000/velka/not-found-image-15383864787lu.jpg",")"),backgroundRepeat:"no-repeat"},children:Object(h.jsx)("div",{className:"flex-container",children:Object(h.jsxs)("div",{className:"containor-info",children:[Object(h.jsx)(_,Object(x.a)(Object(x.a)({},c),{},{items:c})),Object(h.jsx)(I,{id:d,isLoaded:l}),Object(h.jsx)(E,{id:d,isLoaded:l}),Object(h.jsx)(A,{isLoaded:l})]})})}):Object(h.jsx)(F,{})})}function G(e){return e>=8?"green":e>=5?"orange":"red"}var D=function(e){var t=e.poster_path,c=e.title,n=e.vote_average,a=e.id,s=e.release_date;return Object(h.jsxs)("div",{className:"movie",children:[Object(h.jsx)(L.b,{to:"/movie/".concat(a),children:Object(h.jsx)("img",{src:t?"https://image.tmdb.org/t/p/w1280"+t:"https://www.publicdomainpictures.net/pictures/280000/velka/not-found-image-15383864787lu.jpg",alt:c})}),Object(h.jsxs)("div",{className:"movie-info",children:[Object(h.jsx)("div",{className:"titleContainor",children:Object(h.jsx)("h3",{children:c})}),Object(h.jsx)("div",{className:"voteContainor",children:Object(h.jsx)("span",{className:G(n),children:n})})]}),Object(h.jsxs)("div",{className:"overview",children:[Object(h.jsx)(T,{id:a,class:"overview-genres"}),Object(h.jsx)("hr",{}),Object(h.jsxs)("h5",{children:[" ",s," "]})]})]})},U=c(39),W=c(40),P=c(70),M=c(69),Y=function(e){Object(P.a)(c,e);var t=Object(M.a)(c);function c(){var e;Object(U.a)(this,c);for(var n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).state={page2:2,page3:3,page4:4,page5:5,page6:6,page7:7},e}return Object(W.a)(c,[{key:"componentDidMount",value:function(){var e=this.props.id;e&&(e>1?e>3?e<=496?this.setState({page2:+e-2,page3:+e-1,page4:e,page5:+e+1,page6:+e+2,page7:+e+3}):this.setState({page2:+e-5,page3:+e-4,page4:+e-3,page5:+e-2,page6:+e-1,page7:e}):this.setState({page2:e,page3:+e+1,page4:+e+2,page5:+e+3,page6:+e+4,page7:+e+5}):this.setState({page2:+e+1,page3:+e+2,page4:+e+3,page5:+e+4,page6:+e+5,page7:+e+6}))}},{key:"componentDidUpdate",value:function(){isNaN(this.state.page2)&&this.props.navigate("/popular/1")}},{key:"render",value:function(){var e=this,t=this.props.path,c=this.props.id;return Object(h.jsx)("div",{className:"pagebutton",children:Object(h.jsxs)("ul",{className:"ul-num",children:[Object(h.jsx)("li",{className:"li-pageButton",onClick:function(){var n=c-1;n>=1&&e.props.navigate("".concat(t).concat(n))},children:Object(h.jsx)(l.a,{})}),Object(h.jsx)("li",{className:"li-pageButton",children:Object(h.jsx)(L.b,{style:{color:1===c?"#4285F4":"#f5f5f5",marginRight:3===c?18:0},to:"/popular/1",children:"1"})}),c>4?Object(h.jsxs)("li",{onClick:function(){var n=e.state.page2;if(5===c){var a=n-1;e.props.navigate("".concat(t).concat(a))}else if(6===c){var s=n-2;e.props.navigate("".concat(t).concat(s))}else{var r=n-3;e.props.navigate("".concat(t).concat(r))}},className:"li-pageButton",children:[" ","..."," "]}):null,Object(h.jsxs)("li",{className:"li-pageButton",children:[Object(h.jsx)(L.b,{style:{color:c===this.state.page2?"#4285F4":"#f5f5f5"},to:"".concat(t).concat(this.state.page2),children:this.state.page2})," "]}),Object(h.jsxs)("li",{className:"li-pageButton",children:[Object(h.jsx)(L.b,{style:{color:c===this.state.page3?"#4285F4":"#f5f5f5"},to:"".concat(t).concat(this.state.page3),children:this.state.page3})," "]}),Object(h.jsxs)("li",{className:"li-pageButton",children:[Object(h.jsx)(L.b,{style:{color:c===this.state.page4?"#4285F4":"#f5f5f5"},to:"".concat(t).concat(this.state.page4),children:this.state.page4})," "]}),Object(h.jsxs)("li",{className:"li-pageButton",children:[Object(h.jsx)(L.b,{style:{color:c===this.state.page5?"#4285F4":"#f5f5f5"},to:"".concat(t).concat(this.state.page5),children:this.state.page5})," "]}),Object(h.jsx)("li",{className:"li-pageButton hide-num",children:Object(h.jsx)(L.b,{style:{color:c===this.state.page6?"#4285F4":"#f5f5f5"},to:"".concat(t).concat(this.state.page6),children:this.state.page6})}),Object(h.jsxs)("li",{className:"li-pageButton hide-num",children:[Object(h.jsx)(L.b,{style:{color:c===this.state.page7?"#4285F4":"#f5f5f5"},to:"".concat(t).concat(this.state.page7),children:this.state.page7})," "]}),c<493&&Object(h.jsxs)("li",{className:"li-pageButton",onClick:function(){var c=e.state.page7+3;e.props.navigate("".concat(t).concat(c))},children:[" ","..."," "]}),Object(h.jsxs)("li",{className:"li-pageButton",onClick:function(){if(c<500){var n=+c+1;n>1&&e.props.navigate("".concat(t).concat(n))}},children:[Object(h.jsx)(l.b,{})," "]})]})})}}]),c}(n.Component),H=Y;c(127);var J=function(e){var t=e.name,c=Object(i.h)().id,a=Object(i.g)(),s=Object(n.useState)([]),r=Object(o.a)(s,2),l=r[0],j=r[1],u=Object(n.useState)(!1),d=Object(o.a)(u,2),b=d[0],O=d[1],p=Object(n.useContext)(m).movieUrl,f=Object(n.useRef)(null);Object(n.useEffect)((function(){return f.current=!0,v(f),function(){return f.current=!1}}),[]);var v=function(){var e=Object(w.a)(g.a.mark((function e(n){var s,r,i;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(p(t,c));case 3:return s=e.sent,e.next=6,s.json();case 6:r=e.sent,n.current&&(i=r.results,j(i),c<=r.total_pages?O(!0):a("/".concat(t,"/").concat(r.total_pages))),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}();return Object(h.jsx)(h.Fragment,{children:b?Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("div",{className:"movie-containor",children:l.map((function(e){return Object(n.createElement)(D,Object(x.a)(Object(x.a)({},e),{},{key:e.id,isload:b}))}))}),Object(h.jsx)(H,{id:c,path:"/".concat(t,"/"),navigate:a})]}):Object(h.jsx)(F,{})})},z="https://api.themoviedb.org/3/search/movie?api_key=".concat("c417b9996e32c1b5ea31b6d166a52ff9","&query="),V=function(){var e=Object(i.h)().name,t=Object(n.useState)([]),c=Object(o.a)(t,2),a=c[0],s=c[1],r=Object(n.useState)(!0),l=Object(o.a)(r,2),j=l[0],u=l[1];return Object(n.useEffect)((function(){fetch(z+e).then((function(e){return e.json()})).then((function(e){e.total_pages>0?(e=e.results,s(e),u(!0)):u(!1)}))}),[]),j?Object(h.jsx)("div",{className:"movie-containor",children:a.map((function(e){return Object(n.createElement)(D,Object(x.a)(Object(x.a)({},e),{},{key:e.id}))}))}):Object(h.jsx)("h1",{className:"not-found",children:" Movie Not Found "})},Z=function(){var e=Object(n.useState)([]),t=Object(o.a)(e,2),c=t[0],a=t[1],s=Object(n.useState)(!0),r=Object(o.a)(s,2),i=r[0],l=r[1],j=Object(n.useState)(),u=Object(o.a)(j,2),d=u[0],b=u[1],h=Object(n.useState)(),O=Object(o.a)(h,2),m=O[0],p=O[1],x=Object(n.useState)(!1),f=Object(o.a)(x,2),v=f[0],y=f[1],N=function(){k("/home").then((function(e){console.log(e),e.data?e.data.user_info?(b(e.data.user_info[0]),p(e.data.user_info[1]),y(!0)):l(!1):(y(!1),l(!1))})).catch((function(e){console.log(e),y(!1),l(!1)}))},S=function(){var e=Object(w.a)(g.a.mark((function e(){var t;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k("/get_watchlist");case 3:"Failed"!==(t=e.sent).data?a(t.data):console.log("faild"),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:return e.abrupt("return",m);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){N()}),[]),Object(n.useEffect)((function(){v&&m&&S().then((function(e){l(!1)}))}),[m,v]),{actions:function(e){var t=e.type,n=e.payload;switch(t){case"set_watchlist":return a(n);case"check_toekn":return N();case"set_auth":return y(n);default:return c}},loading:i,name:d,email:m,isAuth:v,watchlist:c,checkToken:N,movieUrl:function(e,t){return"https://api.themoviedb.org/3/movie/".concat(e,"?sort_by=popularity.desc&api_key=").concat("c417b9996e32c1b5ea31b6d166a52ff9","&page=").concat(t)},movieInfo:function(e){return"https://api.themoviedb.org/3/movie/".concat(e,"?api_key=").concat("c417b9996e32c1b5ea31b6d166a52ff9")},getInfo:function(e,t){return"https://api.themoviedb.org/3/movie/".concat(e,"/").concat(t,"?api_key=").concat("c417b9996e32c1b5ea31b6d166a52ff9")}}};function $(){return Object(h.jsx)("div",{style:{height:"80vh",display:"flex",justifyContent:"center",alignItems:"center",textAlign:"center",color:"#fff"},children:Object(h.jsxs)("div",{children:[Object(h.jsx)("h1",{children:"Sorry"}),Object(h.jsx)("p",{children:"We couldn't find this page 404"}),Object(h.jsx)(L.b,{to:"/popular/1",children:" Go to home page "})]})})}var K=function(e){var t=e.name,c=Object(i.g)();return Object(h.jsxs)("div",{className:"buttons-containor",children:[Object(h.jsxs)("button",{className:"popular"===t?"active popular":"popular",onClick:function(){return c("/popular/1")},children:[" ","Popular"," "]}),Object(h.jsxs)("button",{className:"top_rated"===t?"active top":"top",onClick:function(){return c("/top_rated/1")},children:[" ","Top rated"," "]}),Object(h.jsxs)("button",{className:"upcoming"===t?"active coming":"coming",onClick:function(){return c("/upcoming/1")},children:[" ","Upcoming"," "]})]})};function Q(e){var t=e.children;return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(p,{}),Object(h.jsx)("div",{style:{justifyContent:"center",alignContent:"center"},className:"flex",children:Object(h.jsxs)("div",{style:{width:"90%",justifyContent:"center"},children:[Object(h.jsx)(K,{name:t.props.name}),t]})})]})}function X(e){var t=e.actvie,c=e.setActive;return Object(h.jsxs)("div",{className:"bar-container",children:[Object(h.jsx)("div",{onClick:function(){return c(!1)},className:t?"login-button":"login-button active-bar",children:"Log in"}),Object(h.jsx)("div",{onClick:function(){return c(!0)},className:t?"signup-button active-bar":"signup-button",children:"Sign up"})]})}var ee=c(140),te=c(147),ce=c(141),ne=c(143);function ae(e){var t=e.name,c=e.loading,n=e.className;return Object(h.jsx)(b.a,{type:"submit",disabled:c,style:{marginTop:20},className:n,children:c?Object(h.jsx)(N.a,{animation:"border",style:{width:15,height:15}}):t})}var se=function(){var e=Object(n.useRef)(),t=Object(n.useRef)(),c=Object(n.useState)(null),a=Object(o.a)(c,2),s=a[0],r=a[1],i=Object(n.useState)(!1),l=Object(o.a)(i,2),j=l[0],u=l[1];return Object(h.jsx)(h.Fragment,{children:Object(h.jsx)(ee.a,{id:"active",className:"d-flex",children:Object(h.jsx)("div",{className:"w-100",style:{maxWidth:"400px"},children:Object(h.jsx)(te.a,{children:Object(h.jsxs)(te.a.Body,{children:[Object(h.jsx)("h2",{className:"text-center mb-4",children:"Log In"}),Object(h.jsxs)(ce.a,{variant:s&&"danger",children:[" ",s," "]}),Object(h.jsxs)(ne.a,{onSubmit:function(c){c.preventDefault(),u(!0),r(null);var n=new FormData;n.append("email",e.current.value),n.append("password",t.current.value),k.post("/login",n).then((function(e){"Success"===e.data.message?(console.log(e.data),window.location="/auth/home"):(r(e.data),u(!1))})).catch((function(e){r("Error, Try again"),console.log(e),u(!1)}))},children:[Object(h.jsx)(ne.a.Group,{id:"email",className:"mb-4",children:Object(h.jsx)(ne.a.Control,{placeholder:"Enter email or user name",required:!0,ref:e})}),Object(h.jsx)(ne.a.Group,{id:"password",className:"mb-4",children:Object(h.jsx)(ne.a.Control,{placeholder:"Password",type:"password",minLength:8,required:!0,ref:t})}),Object(h.jsx)(ae,{name:"Log In",className:"w-100",loading:j})]}),Object(h.jsx)("div",{className:"w-100 text-center mt-2",children:Object(h.jsx)(L.b,{to:"/auth/forgot-password",children:"Forgot Password?"})})]})})})})})},re=c(142),ie=c(148),oe=c(88),le=function(e){var t=e.setActive,c=Object(n.useState)(null),a=Object(o.a)(c,2),s=a[0],r=a[1],i=Object(n.useState)(null),l=Object(o.a)(i,2),j=l[0],u=l[1],d=Object(n.useState)(),b=Object(o.a)(d,2),O=b[0],m=b[1],p=Object(n.useState)(!1),x=Object(o.a)(p,2),f=x[0],g=x[1],v=Object(n.useRef)(),w=Object(n.useRef)(),y=Object(n.useRef)(),N=Object(n.useRef)(),S=Object(n.useRef)(),C=function(){m();var e=v.current.value;if(function(e){if(e.slice(0,-1).indexOf(" ")>=0||/[!@#$%^&*()+\-=\[\]{};':"\\|,.<>\/?]+/.test(e))return!0}(e))return m("Sorry, only letters (A-Z), numbers (0-9), and underscore (_) are allowd"),!1;var t=new FormData;return t.append("user-name",e),k.post("/check-user-name",t).then((function(e){if("Clear"!==e.data)return m(e.data),!1;m()})).catch((function(e){console.log(e.response)})),!0};return Object(h.jsx)(h.Fragment,{children:Object(h.jsx)(ee.a,{id:"active",className:"d-flex",children:Object(h.jsx)("div",{className:"w-150",style:{maxWidth:"460px"},children:Object(h.jsx)(te.a,{children:Object(h.jsxs)(te.a.Body,{children:[Object(h.jsx)("h2",{className:"text-center mb-4",children:"Sign up"}),Object(h.jsxs)(ce.a,{variant:s?"danger":j&&"primary",children:[" ",s," ",j," "]}),Object(h.jsxs)(ne.a,{onSubmit:function(e){if(e.preventDefault(),r(null),u(null),!1===C())return!1;if(N.current.value!==S.current.value)return r("password does not match");g(!0);var c=new FormData;c.append("user-name",v.current.value),c.append("name",w.current.value),c.append("email",y.current.value),c.append("password",N.current.value),k.post("/signup",c).then((function(e){"Success"===e.data?(u("Account Created Successfully"),setTimeout((function(){return t(!1)}),2e3)):r(e.data),g(!1)})).catch((function(e){r("Error, Try again"),g(!1)}))},className:"form-row",children:[Object(h.jsx)(re.a,{className:"mb-4",children:Object(h.jsxs)(ie.a,{children:[Object(h.jsx)(ie.a.Text,{children:"@"}),Object(h.jsx)(oe.a,{onBlur:C,ref:v,required:!0,type:"username",placeholder:"Username",className:O&&"is-invalid"}),Object(h.jsx)("div",{className:"invalid-feedback",children:O})]})}),Object(h.jsx)(ne.a.Group,{id:"name",className:"mb-4",children:Object(h.jsx)(ne.a.Control,{type:"Name",placeholder:"Enter your name",required:!0,ref:w})}),Object(h.jsx)(ne.a.Group,{id:"email",className:"mb-4",children:Object(h.jsx)(ne.a.Control,{type:"email",placeholder:"Enter email",required:!0,ref:y})}),Object(h.jsxs)(re.a,{children:[Object(h.jsx)(ne.a.Group,{id:"password",className:"col-md-6",children:Object(h.jsx)(ne.a.Control,{type:"password",placeholder:"Password",minLength:8,required:!0,ref:N})}),Object(h.jsx)(ne.a.Group,{id:"confirm-password",className:"col-md-6",children:Object(h.jsx)(ne.a.Control,{type:"password",placeholder:"Confirm",minLength:8,required:!0,ref:S})})]}),Object(h.jsx)(ae,{className:"w-100",loading:f,name:"Sign up"})]})]})})})})})};function je(){var e=Object(n.useState)(null),t=Object(o.a)(e,2),c=t[0],a=t[1],s=Object(n.useState)(null),r=Object(o.a)(s,2),i=r[0],l=r[1],j=Object(n.useState)(!1),u=Object(o.a)(j,2),d=u[0],b=u[1],O=Object(n.useState)(),m=Object(o.a)(O,2),p=m[0],x=m[1],f=Object(n.useState)(!1),g=Object(o.a)(f,2),v=g[0],w=g[1],N=Object(n.useRef)(),S=Object(n.useRef)(),C=Object(n.useRef)();return Object(h.jsxs)(ee.a,{className:"d-flex align-items-center justify-content-center",children:[d&&Object(h.jsx)(y,{alertErr:p}),Object(h.jsx)("div",{className:"w-100",style:{maxWidth:"400px"},children:Object(h.jsx)(te.a,{children:Object(h.jsxs)(te.a.Body,{children:[Object(h.jsx)("h2",{className:"text-center mb-4",children:"Update password"}),Object(h.jsx)("div",{style:{height:60},children:Object(h.jsxs)(ce.a,{className:"h-20",variant:c?"danger":i?"primary":"",children:[" ",c," ",i," "]})}),Object(h.jsxs)(ne.a,{onSubmit:function(e){if(e.preventDefault(),a(),S.current.value!==C.current.value)return a("password does not match");w(!0),k("/update_pass",{params:{old_password:N.current.value,new_password:S.current.value}}).then((function(e){"password updated successfully"===e.data?(l(e.data),a(),setTimeout((function(){return window.location="/auth/home"}),1e3)):(a(e.data),l()),w(!1)})).catch((function(e){console.log(e.response),401===e.response.status?(b(!0),x("Sorry, Your session has ended"),setTimeout((function(){return window.location="/popular/1"}),2e3)):a("Error, Please try again"),w(!1)}))},children:[Object(h.jsxs)(ne.a.Group,{id:"old-password",children:[Object(h.jsx)(ne.a.Label,{children:" Old password"}),Object(h.jsx)(ne.a.Control,{type:"password",required:!0,minLength:8,ref:N})]}),Object(h.jsxs)(ne.a.Group,{id:"password",children:[Object(h.jsx)(ne.a.Label,{children:" New Password"}),Object(h.jsx)(ne.a.Control,{type:"password",minLength:8,required:!0,ref:S})]}),Object(h.jsxs)(ne.a.Group,{id:"confirm-password",children:[Object(h.jsx)(ne.a.Label,{children:" Confirm New Password"}),Object(h.jsx)(ne.a.Control,{type:"password",minLength:8,required:!0,ref:C})]}),Object(h.jsx)(ae,{className:"w-100",loading:v,name:"Update"})]})]})})})]})}var ue=function(e){var t=e.children;return Object(n.useContext)(m).isAuth?t:Object(h.jsx)(i.a,{to:"/auth/log-in"})};function de(e){var t=e.name,c=Object(n.useState)(null),a=Object(o.a)(c,2),s=a[0],r=a[1],i=Object(n.useState)(null),l=Object(o.a)(i,2),j=l[0],u=l[1],d=Object(n.useState)(!1),b=Object(o.a)(d,2),O=b[0],m=b[1],p=Object(n.useState)(!1),x=Object(o.a)(p,2),f=x[0],g=x[1],v=Object(n.useState)(),w=Object(o.a)(v,2),N=w[0],S=w[1],C=Object(n.useRef)();return Object(h.jsxs)(ee.a,{className:"d-flex align-items-center justify-content-center",children:[f&&Object(h.jsx)(y,{alertErr:N}),Object(h.jsx)("div",{className:"w-100",style:{maxWidth:"400px"},children:Object(h.jsx)(te.a,{children:Object(h.jsxs)(te.a.Body,{children:[Object(h.jsx)("h2",{className:"text-center mb-4",children:"Update name"}),Object(h.jsx)("div",{style:{height:60},children:Object(h.jsxs)(ce.a,{className:"h-20",variant:s?"danger":j?"primary":"",children:[" ",s," ",j," "]})}),Object(h.jsxs)(ne.a,{onSubmit:function(e){if(e.preventDefault(),r(),C.current.value===t)return!1;m(!0),k("/update_name",{params:{new_name:C.current.value}}).then((function(e){"name updated successfully"===e.data?(u(e.data),r(),setTimeout((function(){return window.location="/auth/home"}),1e3)):(r(e.data),u()),m(!1)})).catch((function(e){console.log(e.response),401===e.response.status?(g(!0),S("Sorry, Your session has ended"),setTimeout((function(){return window.location="/popular/1"}),2e3)):r("Error, Please try again"),m(!1)}))},children:[Object(h.jsxs)(ne.a.Group,{id:"old-password",children:[Object(h.jsx)(ne.a.Label,{children:" Name "}),Object(h.jsx)(ne.a.Control,{type:"text",defaultValue:t,required:!0,minLength:8,ref:C})]}),Object(h.jsx)(ae,{name:"Update",className:"w-100",loading:O})]})]})})})]})}function be(){var e=Object(n.useContext)(m).name;return Object(h.jsxs)(i.d,{children:[Object(h.jsx)(i.b,{path:"/",element:Object(h.jsx)(he,{name:e})}),Object(h.jsx)(i.b,{path:"update-password",element:Object(h.jsx)(ue,{children:Object(h.jsx)(je,{})})}),Object(h.jsx)(i.b,{path:"update-name",element:Object(h.jsx)(ue,{children:Object(h.jsx)(de,{name:e})})}),Object(h.jsx)(i.b,{path:"*",element:Object(h.jsx)(i.a,{to:"/auth/home"})})]})}function he(e){var t=e.name,c=Object(n.useState)(!1),a=Object(o.a)(c,2),s=a[0],r=a[1],i=function(){r(!0),k("/log_out").then((function(e){"Logged out successfully"===e.data.msg&&(window.location="/auth/log-in")})).catch((function(e){return window.location="/auth/log-in"}))};return Object(h.jsxs)("div",{className:"acount-container",children:[Object(h.jsx)(ee.a,{className:"align-items-center justify-content-center",children:Object(h.jsx)("div",{className:"w-150",style:{minWidth:350},children:Object(h.jsx)(te.a,{style:{minHeight:250},children:Object(h.jsxs)(te.a.Body,{children:["Welcome",Object(h.jsx)("h4",{className:"text-center mb-4",children:t}),Object(h.jsxs)("div",{className:"button-container",children:[Object(h.jsx)(b.a,{onClick:function(){return window.location="/auth/home/update-password"},style:{marginTop:20},children:"Update password"}),Object(h.jsx)(b.a,{onClick:function(){return window.location="/auth/home/update-name"},style:{marginTop:20},children:"Update name"})]})]})})})}),Object(h.jsx)("div",{onClick:i,children:Object(h.jsx)(ae,{loading:s,onClick:i,name:"Log out",className:"w-100 btn-danger"})})]})}function Oe(){var e=Object(n.useRef)(),t=Object(n.useState)(),c=Object(o.a)(t,2),a=c[0],s=c[1],r=Object(n.useState)(),i=Object(o.a)(r,2),l=i[0],j=i[1],u=Object(n.useState)(),d=Object(o.a)(u,2),O=d[0],m=d[1],p=Object(n.useState)(!1),x=Object(o.a)(p,2),f=x[0],g=x[1];Object(n.useEffect)((function(){O>0?setTimeout((function(){return m((function(e){return e-1}))}),1e3):j()}),[O]),Object(n.useEffect)((function(){return function(){return m()}}),[]);return Object(h.jsx)(h.Fragment,{children:Object(h.jsx)(ee.a,{className:"d-flex align-items-center justify-content-center",children:Object(h.jsx)("div",{className:"w-100",style:{maxWidth:"400px"},children:Object(h.jsx)(te.a,{children:Object(h.jsxs)(te.a.Body,{children:[Object(h.jsx)("h2",{className:"text-center mb-4",children:"Reset Password"}),Object(h.jsxs)(ce.a,{variant:a?"danger":l?"primary":"",children:[" ",a," ",l," "]}),Object(h.jsxs)(ne.a,{onSubmit:function(t){g(!0),t.preventDefault();var c=new FormData;c.append("email",e.current.value),k.post("/reset",c).then((function(e){"Failed"===e.data||"This email is not registered"===e.data?(j(),s(e.data)):(s(),j(e.data),m(30))})).catch((function(e){return console.log(e)})).finally((function(){return g(!1)}))},children:[Object(h.jsxs)(ne.a.Group,{id:"email",children:[Object(h.jsx)(ne.a.Label,{children:" Email"}),Object(h.jsx)(ne.a.Control,{type:"email",required:!0,ref:e})]}),Object(h.jsx)(b.a,{className:"w-100",disabled:!!(O>0||f),type:"submit",style:{marginTop:20},children:O>0?"send email again in ".concat(O):f?"sending...":"Send me an email"})]}),Object(h.jsxs)("div",{className:"w-100 text-center mt-2",children:["You already have an account ","  ",Object(h.jsx)(L.b,{to:"/auth/log-in",children:"Log in"})]})]})})})})})}var me=function(){var e=Object(n.useState)([]),t=Object(o.a)(e,2),c=t[0],a=t[1],s=Object(n.useState)(!1),r=Object(o.a)(s,2),i=r[0],l=r[1],j=Object(n.useRef)(!1),u=Object(n.useContext)(m),d=u.watchlist,b=u.email,O=u.checkToken,p=u.movieInfo;return Object(n.useEffect)((function(){return j.current=!0,j.current&&(d.length>0?function(e){var t=e.length;e.forEach((function(e){fetch(p(e)).then((function(e){return e.json()})).then((function(e){a((function(t){return[].concat(Object(v.a)(t),[e])})),0===(t-=1)&&l(!0)})).catch((function(e){return console.log(e)}))}))}(d):l(!0)),!b&&O(),function(){return j.current=!1}}),[d]),Object(h.jsx)(h.Fragment,{children:i?Object(h.jsx)(h.Fragment,{children:c.length>0?Object(h.jsx)("div",{className:"movie-containor",children:c.map((function(e){return Object(n.createElement)(D,Object(x.a)(Object(x.a)({},e),{},{key:e.id}))}))}):Object(h.jsxs)("div",{className:"watchlist-div",children:[Object(h.jsx)("h3",{children:"No Watchlist Movies "}),Object(h.jsx)("h3",{children:" Add some !"})]})}):Object(h.jsx)(F,{})})};c(128);function pe(){var e=Object(n.useState)(!1),t=Object(o.a)(e,2),c=t[0],a=t[1],s=Object(n.useContext)(m),r=s.loading,l=s.isAuth;return Object(h.jsx)("div",{className:"container",children:!r&&Object(h.jsxs)(i.d,{children:[Object(h.jsx)(i.b,{path:"/*",element:l?Object(h.jsx)(i.a,{to:"/auth/home"}):Object(h.jsx)(i.a,{to:"/auth/log-in"})}),Object(h.jsx)(i.b,{path:"home/*",element:Object(h.jsx)(ue,{children:Object(h.jsx)(be,{})})}),Object(h.jsx)(i.b,{path:"log-in",element:l?Object(h.jsx)(i.a,{to:"/auth/home"}):Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(X,{actvie:c,setActive:a}),c?Object(h.jsx)(le,{setActive:a}):Object(h.jsx)(se,{})]})}),Object(h.jsx)(i.b,{path:"forgot-password",element:Object(h.jsx)(Oe,{})}),Object(h.jsx)(i.b,{path:"watchlist",element:Object(h.jsx)(ue,{children:Object(h.jsx)(me,{})})})]})})}var xe=c(89);function fe(){var e=Object(n.useContext)(m).isAuth,t=Object(n.useState)(!1),c=Object(o.a)(t,2),a=c[0],s=c[1],r=Object(n.useState)(),i=Object(o.a)(r,2),l=i[0],j=i[1],u=function(){var t=Object(w.a)(g.a.mark((function t(){var c;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e){t.next=11;break}return t.prev=1,t.next=4,k("/check_token_exp");case 4:"token expired"===(c=t.sent).data&&(console.log(c.data),s(!0),j("Sorry, Your session has ended"),setTimeout((function(){return window.location="/popular/1"}),2500)),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),console.log(t.t0);case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(){return t.apply(this,arguments)}}(),d=Object(n.useRef)();return Object(h.jsxs)("div",{children:[a&&Object(h.jsx)(y,{alertErr:l}),Object(h.jsx)(xe.a,{ref:d,timeout:72e5,onActive:u})]})}var ge=function(){var e=Object(i.f)().key,t=Z();return Object(h.jsxs)(m.Provider,{value:t,children:[Object(h.jsx)(fe,{}),t.loading?Object(h.jsx)(F,{}):Object(h.jsxs)(i.d,{children:[Object(h.jsx)(i.b,{exact:!0,path:"/",element:Object(h.jsx)(i.a,{to:"/popular/1"})}),Object(h.jsx)(i.b,{path:"/auth/*",element:Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(p,{}),Object(h.jsx)("div",{className:"authUser-container",children:Object(h.jsx)(pe,{})})]})}),Object(h.jsx)(i.b,{exact:!0,path:"/popular/:id",element:Object(h.jsx)(h.Fragment,{children:Object(h.jsx)(Q,{children:Object(h.jsx)(J,{name:"popular"},e)})})}),Object(h.jsx)(i.b,{exact:!0,path:"/top_rated/:id",element:Object(h.jsx)(h.Fragment,{children:Object(h.jsx)(Q,{children:Object(h.jsx)(J,{name:"top_rated"},e)})})}),Object(h.jsx)(i.b,{exact:!0,path:"/upcoming/:id",element:Object(h.jsx)(h.Fragment,{children:Object(h.jsx)(Q,{children:Object(h.jsx)(J,{name:"upcoming"},e)})})}),Object(h.jsx)(i.b,{path:"/movie/:id",element:Object(h.jsx)(h.Fragment,{children:Object(h.jsxs)("div",{className:"movie-info-container",children:[Object(h.jsx)(p,{}),Object(h.jsx)(q,{},e)]})})}),Object(h.jsx)(i.b,{path:"/search/:name",element:Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(p,{}),Object(h.jsx)("div",{style:{justifyContent:"center",alignContent:"center"},className:"flex",children:Object(h.jsx)("div",{style:{width:"89%",justifyContent:"center"},children:Object(h.jsx)(V,{},e)})})]})}),Object(h.jsx)(i.b,{path:"*",element:Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(p,{}),Object(h.jsx)($,{})]})})]})]})};c(135);r.a.render(Object(h.jsx)(a.a.StrictMode,{children:Object(h.jsx)(L.a,{children:Object(h.jsx)(ge,{})})}),document.getElementById("root"))},98:function(e,t,c){},99:function(e,t,c){}},[[136,1,2]]]);
//# sourceMappingURL=main.77606bdb.chunk.js.map